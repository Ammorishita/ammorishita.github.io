"use strict";var flipBook={init:function(){this.settings(),this.setUpEvents(),this.buttonEvents()},settings:function(){this.buttons=document.querySelectorAll(".pager")},buttonEvents:function(){for(var e=0;e<this.buttons.length;e++)this.buttons[e].addEventListener("click",this.turnPage.bind(this))},setUpEvents:function(){for(var e=document.querySelectorAll(".book"),i=0,c=0,t=function(e){e.preventDefault(),i=e.touches?e.touches[0].screenX:e.screenX,setTimeout(function(){i=0},1e3)},o=function(e){e.preventDefault(),c=e.changedTouches?e.changedTouches[0].screenX:e.screenX;var t=Math.abs(c-i),o=document.querySelector(".pager.active");if(0<i&&50<t&&i<c){var n=o.previousElementSibling;n&&n.click()}else if(0<i&&50<t&&c<i){var s=o.nextElementSibling;s&&s.click()}},n=0;n<e.length;n++)e[n].addEventListener("mousedown",t),e[n].addEventListener("mouseup",o),e[n].addEventListener("touchstart",t),e[n].addEventListener("touchend",o)},removeClones:function(){for(var e=document.querySelectorAll(".book--clone"),t=0;t<e.length;t++)e[t].remove()},setPages:function(){for(var e=document.querySelectorAll(".book"),t=0;t<e.length;t++)e[t].classList.value="book"},cloneBook:function(e,t,o){var n=e.cloneNode(!0),s=n.querySelectorAll(".book__page");if(!window.matchMedia("(min-width: 48em)").matches){n.style.width=Math.floor(o/2)+"px";for(var i=0;i<s.length;i++)s[i].style.width=o+"px"}return n.classList.value="book book--clone book-hidden",n.classList.add(t),n},turnPage:function(e){var t=this,o=e.target,n=Number(o.getAttribute("data-id")),s=document.querySelector('.book[data-id="'.concat(n,'"]')),i=document.querySelectorAll(".pager"),c=document.querySelector(".book.current-book"),r=document.querySelector(".pager.active"),a=Number(r.getAttribute("data-id")),l=document.querySelector(".book-container"),u=c.getBoundingClientRect().width;i.forEach(function(e){e.classList.remove("active")}),o.classList.add("active");var d=a<n?"forward":a===n?"same":"previous",h=Math.floor(500);if("same"!=d){var v=this.cloneBook(c,"left",u),f=this.cloneBook(c,"right",u),b=this.cloneBook(s,"target",u);l.appendChild(b),l.appendChild(v),l.appendChild(f),setTimeout(function(){for(var e=document.querySelectorAll(".book--clone"),t=0;t<e.length;t++)e[t].classList.remove("book-hidden");l.classList.value="book-container",l.classList.add(d),s.classList.add("temp-book")},50),setTimeout(function(){"forward"==d?(f.classList.add("book-hidden"),b.classList.add("top-book")):"previous"==d&&(v.classList.add("book-hidden"),b.classList.add("top-book"))},h),setTimeout(function(){t.removeClones(),t.setPages(),s.classList.add("current-book")},1e3)}}};flipBook.init();